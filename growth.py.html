#!/usr/bin/python

import os
import sys
import uuid
from util import load, name, growth

if( len(sys.argv) == 2 ):
    nl = int(sys.argv[1])
else:
    nl = 103

f = str( uuid.uuid1() )
d = load()[nl - 1]
n = name( d )
growth( "images/" + f + ".line", d )
os.system( 'gnuplot -e "set term png; set grid; set output \'images/%s.png\'; plot \'images/%s.line\' with linespoints title \'%s\'"' % (f,f,n) )

print( "Content-Type: text/html" )
print( "" )
print( "<html>" )
print( "<body>" )
print( "<img src='images/%s.png'></img>" % (f) )
print( "</body>" )
print( "</html>" )
